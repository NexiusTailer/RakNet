<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>RakNet: RakNet::CCRakNetUDT Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceRakNet.html">RakNet</a>::<a class="el" href="classRakNet_1_1CCRakNetUDT.html">CCRakNetUDT</a>
  </div>
</div>
<div class="contents">
<h1>RakNet::CCRakNetUDT Class Reference</h1><!-- doxytag: class="RakNet::CCRakNetUDT" -->Encapsulates UDT congestion control, as used by <a class="el" href="namespaceRakNet.html" title="Forward declaration.">RakNet</a> Requirements:.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;CCRakNetUDT.h&gt;</code>
<p>

<p>
<a href="classRakNet_1_1CCRakNetUDT-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4ce3b64953f8955ab9f5ddfc0fc2f3b8"></a><!-- doxytag: member="RakNet::CCRakNetUDT::Init" ref="4ce3b64953f8955ab9f5ddfc0fc2f3b8" args="(CCTimeType curTime, uint32_t maxDatagramPayload)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#4ce3b64953f8955ab9f5ddfc0fc2f3b8">Init</a> (CCTimeType curTime, uint32_t maxDatagramPayload)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reset all variables to their initial states, for a new connection. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="55338d840de0ab779fce0adbad13035f"></a><!-- doxytag: member="RakNet::CCRakNetUDT::Update" ref="55338d840de0ab779fce0adbad13035f" args="(CCTimeType curTime, bool hasDataToSendOrResend)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#55338d840de0ab779fce0adbad13035f">Update</a> (CCTimeType curTime, bool hasDataToSendOrResend)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update over time. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#8bccdc59401e7c858a5ad6622c22b089">ShouldSendACKs</a> (CCTimeType curTime, CCTimeType estimatedTimeToNextTick)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">DatagramSequenceNumberType&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#92a60d33f309abb79e7dfed88bb008da">GetNextDatagramSequenceNumber</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#098c980d9b2e26a06242431d81104c33">OnSendBytes</a> (CCTimeType curTime, uint32_t numBytes)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="bf5ff81bd53090d67a8f9551449cda3b"></a><!-- doxytag: member="RakNet::CCRakNetUDT::OnGotPacketPair" ref="bf5ff81bd53090d67a8f9551449cda3b" args="(DatagramSequenceNumberType datagramSequenceNumber, uint32_t sizeInBytes, CCTimeType curTime)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#bf5ff81bd53090d67a8f9551449cda3b">OnGotPacketPair</a> (DatagramSequenceNumberType datagramSequenceNumber, uint32_t sizeInBytes, CCTimeType curTime)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Call this when you get a packet pair. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#9745aff0eecb30ac375f96d7ed900ec4">OnGotPacket</a> (DatagramSequenceNumberType datagramSequenceNumber, bool isContinuousSend, CCTimeType curTime, uint32_t sizeInBytes, uint32_t *skippedMessageCount)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#b62bfd98e871b8d23688c568db191c4f">OnResend</a> (CCTimeType curTime)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#68aa7981397893a0c872a983bbb7e2e7">OnAck</a> (CCTimeType curTime, CCTimeType rtt, bool hasBAndAS, BytesPerMicrosecond _B, BytesPerMicrosecond _AS, double totalUserDataBytesAcked, bool isContinuousSend, DatagramSequenceNumberType sequenceNumber)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#4450a87680553db9783ea30755f6d5a8">OnSendAckGetBAndAS</a> (CCTimeType curTime, bool *hasBAndAS, BytesPerMicrosecond *_B, BytesPerMicrosecond *_AS)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#f7455ee4835dd7bca3a477302783e1be">OnSendAck</a> (CCTimeType curTime, uint32_t numBytes)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#387a04edc27ce71cb04af8e91877a944">OnSendNACK</a> (CCTimeType curTime, uint32_t numBytes)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">CCTimeType&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#d911b0c0adcc71a279a426878e9788bd">GetRTOForRetransmission</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#0b1c120767dc4a2be1ee07a0f3bb65bb">SetMTU</a> (uint32_t bytes)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="676f5d5759d312e6fd177cdf3660e9dd"></a><!-- doxytag: member="RakNet::CCRakNetUDT::GetMTU" ref="676f5d5759d312e6fd177cdf3660e9dd" args="(void) const " -->
uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#676f5d5759d312e6fd177cdf3660e9dd">GetMTU</a> (void) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return what was set by <a class="el" href="classRakNet_1_1CCRakNetUDT.html#0b1c120767dc4a2be1ee07a0f3bb65bb">SetMTU()</a>. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="481e30533e9de45a30e964dc4a0f3246"></a><!-- doxytag: member="RakNet::CCRakNetUDT::GetLocalSendRate" ref="481e30533e9de45a30e964dc4a0f3246" args="(void) const " -->
BytesPerMicrosecond&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#481e30533e9de45a30e964dc4a0f3246">GetLocalSendRate</a> (void) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Query for statistics. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="af6d1c65a85157a2e28693d018f0ecc2"></a><!-- doxytag: member="RakNet::CCRakNetUDT::GetRTT" ref="af6d1c65a85157a2e28693d018f0ecc2" args="(void) const " -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#af6d1c65a85157a2e28693d018f0ecc2">GetRTT</a> (void) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Query for statistics. <br></td></tr>
<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c5105e566aea7f02ee6f144701a5e00c"></a><!-- doxytag: member="RakNet::CCRakNetUDT::GreaterThan" ref="c5105e566aea7f02ee6f144701a5e00c" args="(DatagramSequenceNumberType a, DatagramSequenceNumberType b)" -->
static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#c5105e566aea7f02ee6f144701a5e00c">GreaterThan</a> (DatagramSequenceNumberType a, DatagramSequenceNumberType b)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Is a &gt; b, accounting for variable overflow? <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c9d2461d6412f31dd06aa1403cd3ea76"></a><!-- doxytag: member="RakNet::CCRakNetUDT::LessThan" ref="c9d2461d6412f31dd06aa1403cd3ea76" args="(DatagramSequenceNumberType a, DatagramSequenceNumberType b)" -->
static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#c9d2461d6412f31dd06aa1403cd3ea76">LessThan</a> (DatagramSequenceNumberType a, DatagramSequenceNumberType b)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Is a &lt; b, accounting for variable overflow? <br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ce0d603d0ea12c812e5a16f2911a2848"></a><!-- doxytag: member="RakNet::CCRakNetUDT::SetNextSYNUpdate" ref="ce0d603d0ea12c812e5a16f2911a2848" args="(CCTimeType currentTime)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#ce0d603d0ea12c812e5a16f2911a2848">SetNextSYNUpdate</a> (CCTimeType currentTime)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update nextSYNUpdate by SYN, or the same amount past the current time if no updates have occurred for a long time. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="055271fe5ad776eec681349e31d13868"></a><!-- doxytag: member="RakNet::CCRakNetUDT::ReceiverCalculateDataArrivalRate" ref="055271fe5ad776eec681349e31d13868" args="(CCTimeType curTime) const " -->
BytesPerMicrosecond&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#055271fe5ad776eec681349e31d13868">ReceiverCalculateDataArrivalRate</a> (CCTimeType curTime) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the rate of data arrival, based on packets arriving on the sender. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c8a4b72191a1685746204848812e54a8"></a><!-- doxytag: member="RakNet::CCRakNetUDT::ReceiverCalculateDataArrivalRateMedian" ref="c8a4b72191a1685746204848812e54a8" args="(void) const " -->
BytesPerMicrosecond&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#c8a4b72191a1685746204848812e54a8">ReceiverCalculateDataArrivalRateMedian</a> (void) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the median of the data arrival rate. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">CCTimeType&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#4ee92702503a6dd341236d7e7c1cc0d9">GetSenderRTOForACK</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="fe61f2e7af1035c3b0b0583e1762b6cd"></a><!-- doxytag: member="RakNet::CCRakNetUDT::EndSlowStart" ref="fe61f2e7af1035c3b0b0583e1762b6cd" args="(void)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#fe61f2e7af1035c3b0b0583e1762b6cd">EndSlowStart</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop slow start, and enter normal transfer rate. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e2b2fd5b0e7a48044e37a0e3022ed575"></a><!-- doxytag: member="RakNet::CCRakNetUDT::BytesPerMicrosecondToPacketsPerMillisecond" ref="e2b2fd5b0e7a48044e37a0e3022ed575" args="(BytesPerMicrosecond in)" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#e2b2fd5b0e7a48044e37a0e3022ed575">BytesPerMicrosecondToPacketsPerMillisecond</a> (BytesPerMicrosecond in)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Does the named conversion. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#99cc63d23201e61352fb33485a039d34">UpdateWindowSizeAndAckOnAckPreSlowStart</a> (double totalUserDataBytesAcked)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update the round trip time, from ACK or ACK2.  <a href="#99cc63d23201e61352fb33485a039d34"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="61ab6246afa94f10534d00eb72b72e48"></a><!-- doxytag: member="RakNet::CCRakNetUDT::UpdateWindowSizeAndAckOnAckPerSyn" ref="61ab6246afa94f10534d00eb72b72e48" args="(CCTimeType curTime, CCTimeType rtt, bool isContinuousSend, DatagramSequenceNumberType sequenceNumber)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#61ab6246afa94f10534d00eb72b72e48">UpdateWindowSizeAndAckOnAckPerSyn</a> (CCTimeType curTime, CCTimeType rtt, bool isContinuousSend, DatagramSequenceNumberType sequenceNumber)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update the corresponding variables post-slow start. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2e4579352bde32c43e7237aa1ad54cf8"></a><!-- doxytag: member="RakNet::CCRakNetUDT::ResetOnDataArrivalHalveSNDOnNoDataTime" ref="2e4579352bde32c43e7237aa1ad54cf8" args="(CCTimeType curTime)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#2e4579352bde32c43e7237aa1ad54cf8">ResetOnDataArrivalHalveSNDOnNoDataTime</a> (CCTimeType curTime)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets halveSNDOnNoDataTime to the future, and also resets ExpCount, which is used to multiple the RTO on no data arriving at all. <br></td></tr>
<tr><td colspan="2"><br><h2>Static Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="46aba3a3f2244cb106e953be892ab39c"></a><!-- doxytag: member="RakNet::CCRakNetUDT::CalculateListMedianRecursive" ref="46aba3a3f2244cb106e953be892ab39c" args="(const BytesPerMicrosecond inputList[CC_RAKNET_UDT_PACKET_HISTORY_LENGTH], int inputListLength, int lessThanSum, int greaterThanSum)" -->
static BytesPerMicrosecond&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#46aba3a3f2244cb106e953be892ab39c">CalculateListMedianRecursive</a> (const BytesPerMicrosecond inputList[CC_RAKNET_UDT_PACKET_HISTORY_LENGTH], int inputListLength, int lessThanSum, int greaterThanSum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculates the median an array of BytesPerMicrosecond. <br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">MicrosecondsPerByte&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#af5b074b6ec43f211853d5c168150ab6">SND</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#5edf6a2e77d05d838d69f352672fbdf6">CWND</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">CCTimeType&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#eb20ef9ac41fa2db0a5275384bfc93af">nextSYNUpdate</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#f2235085e5a25b0e03bd4425180e191b">packetPairRecieptHistoryWriteIndex</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#860d3d061c314f419d0e5cd1aba7136e">RTT</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#c78f298234f763e5ebf18798165e13ab">minRTT</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update: Use min/max, RTTVar follows current variance too closely resulting in packetloss.  <a href="#c78f298234f763e5ebf18798165e13ab"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">BytesPerMicrosecond&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#8a7d31c35c4c61a37589be117d7898bb">packetArrivalHistory</a> [CC_RAKNET_UDT_PACKET_HISTORY_LENGTH]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#97f2fea4b8632cf1da01e0fdf3b41e66">packetArrivalHistoryWriteIndex</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f5ab97f7c582d65eb196108f73477ea3"></a><!-- doxytag: member="RakNet::CCRakNetUDT::lastPacketArrivalTime" ref="f5ab97f7c582d65eb196108f73477ea3" args="" -->
CCTimeType&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#f5ab97f7c582d65eb196108f73477ea3">lastPacketArrivalTime</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tracks the time the last packet that arrived, so BytesPerMicrosecond can be calculated for packetArrivalHistory when a new packet arrives. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">BytesPerMicrosecond&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#9e80b5e34c39d41f063319c34be704d7">AS</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">CCTimeType&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#f5ae47cc1ab23f6b6fdec9f3c84fffe8">lastTransmitOfBAndAS</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#75b10ff828e2ac84b4c9a790d3bf8806">isInSlowStart</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#cc5c90cb7f27ab3f3ed68fbe5be2ec18">NAKCount</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#b9257d79ab34bf808bb57908a9db75ce">AvgNAKNum</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="120cc7e46e8944d545afeccd563e4d20"></a><!-- doxytag: member="RakNet::CCRakNetUDT::DecCount" ref="120cc7e46e8944d545afeccd563e4d20" args="" -->
uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#120cc7e46e8944d545afeccd563e4d20">DecCount</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">How many times we have decremented SND this congestion period. Used to limit the number of decrements to 5. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="381abfbe6ce7e7f8dd4ab3af0ef6b754"></a><!-- doxytag: member="RakNet::CCRakNetUDT::DecInterval" ref="381abfbe6ce7e7f8dd4ab3af0ef6b754" args="" -->
uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#381abfbe6ce7e7f8dd4ab3af0ef6b754">DecInterval</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Every DecInterval NAKs per congestion period, we decrease the send rate. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c42b4998929da21d05314742fb92197a"></a><!-- doxytag: member="RakNet::CCRakNetUDT::nextDatagramSequenceNumber" ref="c42b4998929da21d05314742fb92197a" args="" -->
DatagramSequenceNumberType&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#c42b4998929da21d05314742fb92197a">nextDatagramSequenceNumber</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Every outgoing datagram is assigned a sequence number, which increments by 1 every assignment. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">CCTimeType&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#d53be9c9b7fcea1400bee4fa18dfcfb9">lastPacketPairPacketArrivalTime</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">DatagramSequenceNumberType&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#c382a93a2204236c25587411665cc1fb">lastPacketPairSequenceNumber</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">CCTimeType&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#6442b7a2f098ca9becd8050a7ff86510">lastUpdateWindowSizeAndAck</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#f23a34584b9f20080db4a31bcfc5b202">ExpCount</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#8eccf390d74986f75ecb6752a513d485">totalUserDataBytesSent</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">CCTimeType&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#1c8e7053323596635c369c4fbf527971">oldestUnsentAck</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">DatagramSequenceNumberType&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#aff6f40991f4377d416f49dcd10181ea">expectedNextSequenceNumber</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">BytesPerMicrosecond&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1CCRakNetUDT.html#cf9f3920b8f237316d15a338fe25970f">mostRecentPacketPairValue</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Encapsulates UDT congestion control, as used by <a class="el" href="namespaceRakNet.html" title="Forward declaration.">RakNet</a> Requirements:. 
<p>
<ol>
<li>
Each datagram is no more than MAXIMUM_MTU_SIZE, after accounting for the UDP header </li>
<li>
Each datagram containing a user message has a sequence number which is set after calling <a class="el" href="classRakNet_1_1CCRakNetUDT.html#098c980d9b2e26a06242431d81104c33">OnSendBytes()</a>. Set it by calling <a class="el" href="classRakNet_1_1CCRakNetUDT.html#92a60d33f309abb79e7dfed88bb008da">GetNextDatagramSequenceNumber()</a> </li>
<li>
System is designed to be used from a single thread. </li>
<li>
Each packet should have a timeout time based on <a class="el" href="classRakNet_1_1CCRakNetUDT.html#4ee92702503a6dd341236d7e7c1cc0d9">GetSenderRTOForACK()</a>. If this time elapses, add the packet to the head of the send list for retransmission. </li>
</ol>
<p>
Recommended: <ol>
<li>
Call sendto in its own thread. This takes a significant amount of time in high speed networks. </li>
</ol>
<p>
Algorithm: <ol>
<li>
On a new connection, call <a class="el" href="classRakNet_1_1CCRakNetUDT.html#4ce3b64953f8955ab9f5ddfc0fc2f3b8" title="Reset all variables to their initial states, for a new connection.">Init()</a> </li>
<li>
On a periodic interval (SYN time is the best) call <a class="el" href="classRakNet_1_1CCRakNetUDT.html#55338d840de0ab779fce0adbad13035f" title="Update over time.">Update()</a>. Also call <a class="el" href="classRakNet_1_1CCRakNetUDT.html#8bccdc59401e7c858a5ad6622c22b089">ShouldSendACKs()</a>, and send buffered ACKS if it returns true. </li>
<li>
Call <a class="el" href="classRakNet_1_1CCRakNetUDT.html#f7455ee4835dd7bca3a477302783e1be">OnSendAck()</a> when sending acks. </li>
<li>
When you want to send or resend data, call GetNumberOfBytesToSend(). It will return you enough bytes to keep you busy for <em>estimatedTimeToNextTick</em>. You can send more than this to fill out a datagram, or to send packet pairs </li>
<li>
Call <a class="el" href="classRakNet_1_1CCRakNetUDT.html#098c980d9b2e26a06242431d81104c33">OnSendBytes()</a> when sending datagrams. </li>
<li>
When data arrives, record the sequence number and buffer an ACK for it, to be sent from <a class="el" href="classRakNet_1_1CCRakNetUDT.html#55338d840de0ab779fce0adbad13035f" title="Update over time.">Update()</a> if <a class="el" href="classRakNet_1_1CCRakNetUDT.html#8bccdc59401e7c858a5ad6622c22b089">ShouldSendACKs()</a> returns true </li>
<li>
Every 16 packets that you send, send two of them back to back (a packet pair) as long as both packets are the same size. If you don't have two packets the same size, it is fine to defer this until you do. </li>
<li>
When you get a packet, call <a class="el" href="classRakNet_1_1CCRakNetUDT.html#9745aff0eecb30ac375f96d7ed900ec4">OnGotPacket()</a>. If the packet is also either of a packet pair, call <a class="el" href="classRakNet_1_1CCRakNetUDT.html#bf5ff81bd53090d67a8f9551449cda3b" title="Call this when you get a packet pair.">OnGotPacketPair()</a> </li>
<li>
If you get a packet, and the sequence number is not 1 + the last sequence number, send a NAK. On the remote system, call OnNAK() and resend that message. </li>
<li>
If you get an ACK, remove that message from retransmission. Call OnNonDuplicateAck(). </li>
<li>
If a message is not ACKed for <a class="el" href="classRakNet_1_1CCRakNetUDT.html#d911b0c0adcc71a279a426878e9788bd">GetRTOForRetransmission()</a>, resend it. </li>
</ol>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="92a60d33f309abb79e7dfed88bb008da"></a><!-- doxytag: member="RakNet::CCRakNetUDT::GetNextDatagramSequenceNumber" ref="92a60d33f309abb79e7dfed88bb008da" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DatagramSequenceNumberType RakNet::CCRakNetUDT::GetNextDatagramSequenceNumber           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Every data packet sent must contain a sequence number Call this function to get it. The sequence number is passed into <a class="el" href="classRakNet_1_1CCRakNetUDT.html#bf5ff81bd53090d67a8f9551449cda3b" title="Call this when you get a packet pair.">OnGotPacketPair()</a> 
</div>
</div><p>
<a class="anchor" name="d911b0c0adcc71a279a426878e9788bd"></a><!-- doxytag: member="RakNet::CCRakNetUDT::GetRTOForRetransmission" ref="d911b0c0adcc71a279a426878e9788bd" args="(void) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CCTimeType RakNet::CCRakNetUDT::GetRTOForRetransmission           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Retransmission time out for the sender If the time difference between when a message was last transmitted, and the current time is greater than RTO then packet is eligible for retransmission, pending congestion control RTO = (RTT + 4 * RTTVar) + SYN If we have been continuously sending for the last RTO, and no ACK or NAK at all, SND*=2; This is per message, which is different from UDT, but <a class="el" href="namespaceRakNet.html" title="Forward declaration.">RakNet</a> supports packetloss with continuing data where UDT is only RELIABLE_ORDERED Minimum value is 100 milliseconds 
</div>
</div><p>
<a class="anchor" name="4ee92702503a6dd341236d7e7c1cc0d9"></a><!-- doxytag: member="RakNet::CCRakNetUDT::GetSenderRTOForACK" ref="4ee92702503a6dd341236d7e7c1cc0d9" args="(void) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CCTimeType RakNet::CCRakNetUDT::GetSenderRTOForACK           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Same as GetRTOForRetransmission, but does not factor in ExpCount This is because the receiver does not know ExpCount for the sender, and even if it did, acks shouldn't be delayed for this reason 
</div>
</div><p>
<a class="anchor" name="68aa7981397893a0c872a983bbb7e2e7"></a><!-- doxytag: member="RakNet::CCRakNetUDT::OnAck" ref="68aa7981397893a0c872a983bbb7e2e7" args="(CCTimeType curTime, CCTimeType rtt, bool hasBAndAS, BytesPerMicrosecond _B, BytesPerMicrosecond _AS, double totalUserDataBytesAcked, bool isContinuousSend, DatagramSequenceNumberType sequenceNumber)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RakNet::CCRakNetUDT::OnAck           </td>
          <td>(</td>
          <td class="paramtype">CCTimeType&nbsp;</td>
          <td class="paramname"> <em>curTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CCTimeType&nbsp;</td>
          <td class="paramname"> <em>rtt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>hasBAndAS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BytesPerMicrosecond&nbsp;</td>
          <td class="paramname"> <em>_B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BytesPerMicrosecond&nbsp;</td>
          <td class="paramname"> <em>_AS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>totalUserDataBytesAcked</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>isContinuousSend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DatagramSequenceNumberType&nbsp;</td>
          <td class="paramname"> <em>sequenceNumber</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Call this when an ACK arrives. hasBAndAS are possibly written with the ack, see <a class="el" href="classRakNet_1_1CCRakNetUDT.html#f7455ee4835dd7bca3a477302783e1be">OnSendAck()</a> B and AS are used in the calculations in UpdateWindowSizeAndAckOnAckPerSyn B and AS are updated at most once per SYN 
</div>
</div><p>
<a class="anchor" name="9745aff0eecb30ac375f96d7ed900ec4"></a><!-- doxytag: member="RakNet::CCRakNetUDT::OnGotPacket" ref="9745aff0eecb30ac375f96d7ed900ec4" args="(DatagramSequenceNumberType datagramSequenceNumber, bool isContinuousSend, CCTimeType curTime, uint32_t sizeInBytes, uint32_t *skippedMessageCount)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RakNet::CCRakNetUDT::OnGotPacket           </td>
          <td>(</td>
          <td class="paramtype">DatagramSequenceNumberType&nbsp;</td>
          <td class="paramname"> <em>datagramSequenceNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>isContinuousSend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CCTimeType&nbsp;</td>
          <td class="paramname"> <em>curTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>sizeInBytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&nbsp;</td>
          <td class="paramname"> <em>skippedMessageCount</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Call this when you get a packet (including packet pairs) If the DatagramSequenceNumberType is out of order, skippedMessageCount will be non-zero In that case, send a NAK for every sequence number up to that count 
</div>
</div><p>
<a class="anchor" name="b62bfd98e871b8d23688c568db191c4f"></a><!-- doxytag: member="RakNet::CCRakNetUDT::OnResend" ref="b62bfd98e871b8d23688c568db191c4f" args="(CCTimeType curTime)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RakNet::CCRakNetUDT::OnResend           </td>
          <td>(</td>
          <td class="paramtype">CCTimeType&nbsp;</td>
          <td class="paramname"> <em>curTime</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Call when you get a NAK, with the sequence number of the lost message Affects the congestion control 
</div>
</div><p>
<a class="anchor" name="f7455ee4835dd7bca3a477302783e1be"></a><!-- doxytag: member="RakNet::CCRakNetUDT::OnSendAck" ref="f7455ee4835dd7bca3a477302783e1be" args="(CCTimeType curTime, uint32_t numBytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RakNet::CCRakNetUDT::OnSendAck           </td>
          <td>(</td>
          <td class="paramtype">CCTimeType&nbsp;</td>
          <td class="paramname"> <em>curTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>numBytes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Call when we send an ack, to write B and AS if needed B and AS are only written once per SYN, to prevent slow calculations Also updates SND, the period between sends, since data is written out Be sure to call <a class="el" href="classRakNet_1_1CCRakNetUDT.html#4450a87680553db9783ea30755f6d5a8">OnSendAckGetBAndAS()</a> before calling <a class="el" href="classRakNet_1_1CCRakNetUDT.html#f7455ee4835dd7bca3a477302783e1be">OnSendAck()</a>, since whether you write it or not affects <em>numBytes</em> 
</div>
</div><p>
<a class="anchor" name="4450a87680553db9783ea30755f6d5a8"></a><!-- doxytag: member="RakNet::CCRakNetUDT::OnSendAckGetBAndAS" ref="4450a87680553db9783ea30755f6d5a8" args="(CCTimeType curTime, bool *hasBAndAS, BytesPerMicrosecond *_B, BytesPerMicrosecond *_AS)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RakNet::CCRakNetUDT::OnSendAckGetBAndAS           </td>
          <td>(</td>
          <td class="paramtype">CCTimeType&nbsp;</td>
          <td class="paramname"> <em>curTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&nbsp;</td>
          <td class="paramname"> <em>hasBAndAS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BytesPerMicrosecond *&nbsp;</td>
          <td class="paramname"> <em>_B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BytesPerMicrosecond *&nbsp;</td>
          <td class="paramname"> <em>_AS</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Call when you send an ack, to see if the ack should have the B and AS parameters transmitted Call before calling <a class="el" href="classRakNet_1_1CCRakNetUDT.html#f7455ee4835dd7bca3a477302783e1be">OnSendAck()</a> 
</div>
</div><p>
<a class="anchor" name="098c980d9b2e26a06242431d81104c33"></a><!-- doxytag: member="RakNet::CCRakNetUDT::OnSendBytes" ref="098c980d9b2e26a06242431d81104c33" args="(CCTimeType curTime, uint32_t numBytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RakNet::CCRakNetUDT::OnSendBytes           </td>
          <td>(</td>
          <td class="paramtype">CCTimeType&nbsp;</td>
          <td class="paramname"> <em>curTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>numBytes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Call this when you send packets Every 15th and 16th packets should be sent as a packet pair if possible When packets marked as a packet pair arrive, pass to <a class="el" href="classRakNet_1_1CCRakNetUDT.html#bf5ff81bd53090d67a8f9551449cda3b" title="Call this when you get a packet pair.">OnGotPacketPair()</a> When any packets arrive, (additionally) pass to OnGotPacket Packets should contain our system time, so we can pass rtt to OnNonDuplicateAck() 
</div>
</div><p>
<a class="anchor" name="387a04edc27ce71cb04af8e91877a944"></a><!-- doxytag: member="RakNet::CCRakNetUDT::OnSendNACK" ref="387a04edc27ce71cb04af8e91877a944" args="(CCTimeType curTime, uint32_t numBytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RakNet::CCRakNetUDT::OnSendNACK           </td>
          <td>(</td>
          <td class="paramtype">CCTimeType&nbsp;</td>
          <td class="paramname"> <em>curTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>numBytes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Call when we send a NACK Also updates SND, the period between sends, since data is written out 
</div>
</div><p>
<a class="anchor" name="0b1c120767dc4a2be1ee07a0f3bb65bb"></a><!-- doxytag: member="RakNet::CCRakNetUDT::SetMTU" ref="0b1c120767dc4a2be1ee07a0f3bb65bb" args="(uint32_t bytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RakNet::CCRakNetUDT::SetMTU           </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>bytes</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the maximum amount of data that can be sent in one datagram Default to MAXIMUM_MTU_SIZE-UDP_HEADER_SIZE 
</div>
</div><p>
<a class="anchor" name="8bccdc59401e7c858a5ad6622c22b089"></a><!-- doxytag: member="RakNet::CCRakNetUDT::ShouldSendACKs" ref="8bccdc59401e7c858a5ad6622c22b089" args="(CCTimeType curTime, CCTimeType estimatedTimeToNextTick)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RakNet::CCRakNetUDT::ShouldSendACKs           </td>
          <td>(</td>
          <td class="paramtype">CCTimeType&nbsp;</td>
          <td class="paramname"> <em>curTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CCTimeType&nbsp;</td>
          <td class="paramname"> <em>estimatedTimeToNextTick</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Acks do not have to be sent immediately. Instead, they can be buffered up such that groups of acks are sent at a time This reduces overall bandwidth usage How long they can be buffered depends on the retransmit time of the sender Should call once per update tick, and send if needed 
</div>
</div><p>
<a class="anchor" name="99cc63d23201e61352fb33485a039d34"></a><!-- doxytag: member="RakNet::CCRakNetUDT::UpdateWindowSizeAndAckOnAckPreSlowStart" ref="99cc63d23201e61352fb33485a039d34" args="(double totalUserDataBytesAcked)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RakNet::CCRakNetUDT::UpdateWindowSizeAndAckOnAckPreSlowStart           </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>totalUserDataBytesAcked</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Update the round trip time, from ACK or ACK2. 
<p>
Update the corresponding variables pre-slow start 
</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="9e80b5e34c39d41f063319c34be704d7"></a><!-- doxytag: member="RakNet::CCRakNetUDT::AS" ref="9e80b5e34c39d41f063319c34be704d7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BytesPerMicrosecond <a class="el" href="classRakNet_1_1CCRakNetUDT.html#9e80b5e34c39d41f063319c34be704d7">RakNet::CCRakNetUDT::AS</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Data arrival rate from the sender to the receiver, as told to us by the receiver Used to calculate initial sending rate when slow start stops 
</div>
</div><p>
<a class="anchor" name="b9257d79ab34bf808bb57908a9db75ce"></a><!-- doxytag: member="RakNet::CCRakNetUDT::AvgNAKNum" ref="b9257d79ab34bf808bb57908a9db75ce" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classRakNet_1_1CCRakNetUDT.html#b9257d79ab34bf808bb57908a9db75ce">RakNet::CCRakNetUDT::AvgNAKNum</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
How many NAKs do you get on average during a congestion period? Starts at 1 Used to generate a random number, DecRandom, between 1 and AvgNAKNum 
</div>
</div><p>
<a class="anchor" name="5edf6a2e77d05d838d69f352672fbdf6"></a><!-- doxytag: member="RakNet::CCRakNetUDT::CWND" ref="5edf6a2e77d05d838d69f352672fbdf6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classRakNet_1_1CCRakNetUDT.html#5edf6a2e77d05d838d69f352672fbdf6">RakNet::CCRakNetUDT::CWND</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Supportive window mechanism, controlling the maximum number of in-flight packets Used both during and after slow-start, but primarily during slow-start Starts at 2, which is also the low threshhold Max is the socket receive buffer / MTU CWND = AS * (RTT + SYN) + 16 
</div>
</div><p>
<a class="anchor" name="f23a34584b9f20080db4a31bcfc5b202"></a><!-- doxytag: member="RakNet::CCRakNetUDT::ExpCount" ref="f23a34584b9f20080db4a31bcfc5b202" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classRakNet_1_1CCRakNetUDT.html#f23a34584b9f20080db4a31bcfc5b202">RakNet::CCRakNetUDT::ExpCount</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Every time SND is halved due to timeout, the RTO is increased This is to prevent massive retransmissions to an unresponsive system Reset on any data arriving 
</div>
</div><p>
<a class="anchor" name="aff6f40991f4377d416f49dcd10181ea"></a><!-- doxytag: member="RakNet::CCRakNetUDT::expectedNextSequenceNumber" ref="aff6f40991f4377d416f49dcd10181ea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DatagramSequenceNumberType <a class="el" href="classRakNet_1_1CCRakNetUDT.html#aff6f40991f4377d416f49dcd10181ea">RakNet::CCRakNetUDT::expectedNextSequenceNumber</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Track which datagram sequence numbers have arrived. If a sequence number is skipped, send a NAK for all skipped messages 
</div>
</div><p>
<a class="anchor" name="75b10ff828e2ac84b4c9a790d3bf8806"></a><!-- doxytag: member="RakNet::CCRakNetUDT::isInSlowStart" ref="75b10ff828e2ac84b4c9a790d3bf8806" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classRakNet_1_1CCRakNetUDT.html#75b10ff828e2ac84b4c9a790d3bf8806">RakNet::CCRakNetUDT::isInSlowStart</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
New connections start in slow start During slow start, SND is not used, only CWND Slow start ends when we get a NAK, or the maximum size of CWND is reached SND is initialized to the inverse of the receiver's packet arrival rate when slow start ends 
</div>
</div><p>
<a class="anchor" name="d53be9c9b7fcea1400bee4fa18dfcfb9"></a><!-- doxytag: member="RakNet::CCRakNetUDT::lastPacketPairPacketArrivalTime" ref="d53be9c9b7fcea1400bee4fa18dfcfb9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CCTimeType <a class="el" href="classRakNet_1_1CCRakNetUDT.html#d53be9c9b7fcea1400bee4fa18dfcfb9">RakNet::CCRakNetUDT::lastPacketPairPacketArrivalTime</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If a packet is marked as a packet pair, lastPacketPairPacketArrivalTime is set to the time it arrives This is used so when the 2nd packet of the pair arrives, we can calculate the time interval between the two 
</div>
</div><p>
<a class="anchor" name="c382a93a2204236c25587411665cc1fb"></a><!-- doxytag: member="RakNet::CCRakNetUDT::lastPacketPairSequenceNumber" ref="c382a93a2204236c25587411665cc1fb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DatagramSequenceNumberType <a class="el" href="classRakNet_1_1CCRakNetUDT.html#c382a93a2204236c25587411665cc1fb">RakNet::CCRakNetUDT::lastPacketPairSequenceNumber</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If a packet is marked as a packet pair, lastPacketPairSequenceNumber is checked to see if the last packet we got was the packet immediately before the one that arrived If so, we can use lastPacketPairPacketArrivalTime to get the time between the two packets, and thus estimate the link capacity Initialized to -1, so the first packet of a packet pair won't be treated as the second 
</div>
</div><p>
<a class="anchor" name="f5ae47cc1ab23f6b6fdec9f3c84fffe8"></a><!-- doxytag: member="RakNet::CCRakNetUDT::lastTransmitOfBAndAS" ref="f5ae47cc1ab23f6b6fdec9f3c84fffe8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CCTimeType <a class="el" href="classRakNet_1_1CCRakNetUDT.html#f5ae47cc1ab23f6b6fdec9f3c84fffe8">RakNet::CCRakNetUDT::lastTransmitOfBAndAS</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
When the receiver last calculated and send B and AS, from packetArrivalHistory and packetPairRecieptHistory Used to prevent it from being calculated and send too frequently, as they are slow operations 
</div>
</div><p>
<a class="anchor" name="6442b7a2f098ca9becd8050a7ff86510"></a><!-- doxytag: member="RakNet::CCRakNetUDT::lastUpdateWindowSizeAndAck" ref="6442b7a2f098ca9becd8050a7ff86510" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CCTimeType <a class="el" href="classRakNet_1_1CCRakNetUDT.html#6442b7a2f098ca9becd8050a7ff86510">RakNet::CCRakNetUDT::lastUpdateWindowSizeAndAck</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Used to cap <a class="el" href="classRakNet_1_1CCRakNetUDT.html#61ab6246afa94f10534d00eb72b72e48" title="Update the corresponding variables post-slow start.">UpdateWindowSizeAndAckOnAckPerSyn()</a> to once speed increase per SYN This is to prevent speeding up faster than congestion control can compensate for 
</div>
</div><p>
<a class="anchor" name="c78f298234f763e5ebf18798165e13ab"></a><!-- doxytag: member="RakNet::CCRakNetUDT::minRTT" ref="c78f298234f763e5ebf18798165e13ab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classRakNet_1_1CCRakNetUDT.html#c78f298234f763e5ebf18798165e13ab">RakNet::CCRakNetUDT::minRTT</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Update: Use min/max, RTTVar follows current variance too closely resulting in packetloss. 
<p>
Round trip time variance Only sender needs to know this Initialized to UNSET Set to rtt on first calculation 
</div>
</div><p>
<a class="anchor" name="cf9f3920b8f237316d15a338fe25970f"></a><!-- doxytag: member="RakNet::CCRakNetUDT::mostRecentPacketPairValue" ref="cf9f3920b8f237316d15a338fe25970f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BytesPerMicrosecond <a class="el" href="classRakNet_1_1CCRakNetUDT.html#cf9f3920b8f237316d15a338fe25970f">RakNet::CCRakNetUDT::mostRecentPacketPairValue</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Most recent values read into the corresponding lists Used during the beginning of a connection, when the median filter is still inaccurate 
</div>
</div><p>
<a class="anchor" name="cc5c90cb7f27ab3f3ed68fbe5be2ec18"></a><!-- doxytag: member="RakNet::CCRakNetUDT::NAKCount" ref="cc5c90cb7f27ab3f3ed68fbe5be2ec18" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classRakNet_1_1CCRakNetUDT.html#cc5c90cb7f27ab3f3ed68fbe5be2ec18">RakNet::CCRakNetUDT::NAKCount</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
How many NAKs arrived this congestion period Initialized to 1 when the congestion period starts 
</div>
</div><p>
<a class="anchor" name="eb20ef9ac41fa2db0a5275384bfc93af"></a><!-- doxytag: member="RakNet::CCRakNetUDT::nextSYNUpdate" ref="eb20ef9ac41fa2db0a5275384bfc93af" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CCTimeType <a class="el" href="classRakNet_1_1CCRakNetUDT.html#eb20ef9ac41fa2db0a5275384bfc93af">RakNet::CCRakNetUDT::nextSYNUpdate</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
When we do an update process on the SYN interval, nextSYNUpdate is set to the next time we should update Normally this is nextSYNUpdate+=SYN, in order to update on a consistent schedule However, if this would result in an immediate update yet again, it is set to SYN microseconds past the current time (in case the thread did not update for a long time) 
</div>
</div><p>
<a class="anchor" name="1c8e7053323596635c369c4fbf527971"></a><!-- doxytag: member="RakNet::CCRakNetUDT::oldestUnsentAck" ref="1c8e7053323596635c369c4fbf527971" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CCTimeType <a class="el" href="classRakNet_1_1CCRakNetUDT.html#1c8e7053323596635c369c4fbf527971">RakNet::CCRakNetUDT::oldestUnsentAck</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
When we get an ack, if oldestUnsentAck==0, set it to the current time When we send out acks, set oldestUnsentAck to 0 
</div>
</div><p>
<a class="anchor" name="8a7d31c35c4c61a37589be117d7898bb"></a><!-- doxytag: member="RakNet::CCRakNetUDT::packetArrivalHistory" ref="8a7d31c35c4c61a37589be117d7898bb" args="[CC_RAKNET_UDT_PACKET_HISTORY_LENGTH]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BytesPerMicrosecond <a class="el" href="classRakNet_1_1CCRakNetUDT.html#8a7d31c35c4c61a37589be117d7898bb">RakNet::CCRakNetUDT::packetArrivalHistory</a>[CC_RAKNET_UDT_PACKET_HISTORY_LENGTH]<code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Used to calculate packet arrival rate (in UDT) but data arrival rate (in <a class="el" href="namespaceRakNet.html" title="Forward declaration.">RakNet</a>, where not all datagrams are the same size) Filter is used to cull lowest half of values for bytesPerMicrosecond, to discount spikes and inactivity Referred to in the documentation as AS, data arrival rate AS is sent to the sender and calculated every 10th ack Each node represents (curTime-lastPacketArrivalTime)/bytes Used with <a class="el" href="classRakNet_1_1CCRakNetUDT.html#055271fe5ad776eec681349e31d13868" title="Returns the rate of data arrival, based on packets arriving on the sender.">ReceiverCalculateDataArrivalRate()</a>; 
</div>
</div><p>
<a class="anchor" name="97f2fea4b8632cf1da01e0fdf3b41e66"></a><!-- doxytag: member="RakNet::CCRakNetUDT::packetArrivalHistoryWriteIndex" ref="97f2fea4b8632cf1da01e0fdf3b41e66" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRakNet_1_1CCRakNetUDT.html#97f2fea4b8632cf1da01e0fdf3b41e66">RakNet::CCRakNetUDT::packetArrivalHistoryWriteIndex</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Index into packetArrivalHistory where we will next write The history is always full (starting with default values) so no read index is needed 
</div>
</div><p>
<a class="anchor" name="f2235085e5a25b0e03bd4425180e191b"></a><!-- doxytag: member="RakNet::CCRakNetUDT::packetPairRecieptHistoryWriteIndex" ref="f2235085e5a25b0e03bd4425180e191b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classRakNet_1_1CCRakNetUDT.html#f2235085e5a25b0e03bd4425180e191b">RakNet::CCRakNetUDT::packetPairRecieptHistoryWriteIndex</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Index into packetPairRecieptHistory where we will next write The history is always full (starting with default values) so no read index is needed 
</div>
</div><p>
<a class="anchor" name="860d3d061c314f419d0e5cd1aba7136e"></a><!-- doxytag: member="RakNet::CCRakNetUDT::RTT" ref="860d3d061c314f419d0e5cd1aba7136e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classRakNet_1_1CCRakNetUDT.html#860d3d061c314f419d0e5cd1aba7136e">RakNet::CCRakNetUDT::RTT</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sent to the sender by the receiver from packetPairRecieptHistory whenever a back to back packet arrives on the receiver Updated by B = B * .875 + incomingB * .125 Running round trip time (ping*2) Only sender needs to know this Initialized to UNSET Set to rtt on first calculation Updated gradually by RTT = RTT * 0.875 + rtt * 0.125 
</div>
</div><p>
<a class="anchor" name="af5b074b6ec43f211853d5c168150ab6"></a><!-- doxytag: member="RakNet::CCRakNetUDT::SND" ref="af5b074b6ec43f211853d5c168150ab6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MicrosecondsPerByte <a class="el" href="classRakNet_1_1CCRakNetUDT.html#af5b074b6ec43f211853d5c168150ab6">RakNet::CCRakNetUDT::SND</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
time interval between outgoing packets, in milliseconds Only used when slowStart==false Increased over time as we continually get messages Decreased on NAK and timeout Starts at 0 (invalid) 
</div>
</div><p>
<a class="anchor" name="8eccf390d74986f75ecb6752a513d485"></a><!-- doxytag: member="RakNet::CCRakNetUDT::totalUserDataBytesSent" ref="8eccf390d74986f75ecb6752a513d485" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classRakNet_1_1CCRakNetUDT.html#8eccf390d74986f75ecb6752a513d485">RakNet::CCRakNetUDT::totalUserDataBytesSent</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Total number of user data bytes sent Used to adjust the window size, on ACK, during slow start 
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>c:/RakNet/Source/CCRakNetUDT.h</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Apr 12 08:48:31 2010 for RakNet by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7.1 </small></address>
</body>
</html>
