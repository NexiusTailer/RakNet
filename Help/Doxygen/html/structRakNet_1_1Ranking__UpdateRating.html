<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RakNet: RakNet::Ranking_UpdateRating Struct Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="namespaceRakNet.html">RakNet</a>::<a class="el" href="structRakNet_1_1Ranking__UpdateRating.html">Ranking_UpdateRating</a></div>
<h1>RakNet::Ranking_UpdateRating Struct Reference</h1><!-- doxytag: class="RakNet::Ranking_UpdateRating" --><!-- doxytag: inherits="RakNet::Lobby2Message" --><code>#include &lt;Lobby2Message.h&gt;</code>
<p>
<p>Inheritance diagram for RakNet::Ranking_UpdateRating:
<p><center><img src="structRakNet_1_1Ranking__UpdateRating.png" usemap="#RakNet::Ranking_UpdateRating_map" border="0" alt=""></center>
<map name="RakNet::Ranking_UpdateRating_map">
<area href="structRakNet_1_1Lobby2Message.html" alt="RakNet::Lobby2Message" shape="rect" coords="0,0,184,24">
</map>
<a href="structRakNet_1_1Ranking__UpdateRating-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRakNet_1_1Ranking__UpdateRating.html#bb40a9166eeed59cc59a490440968926">RequiresAdmin</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRakNet_1_1Ranking__UpdateRating.html#5ba36ef4e38f364dea55b3f09d0e7c5f">CancelOnDisconnect</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRakNet_1_1Ranking__UpdateRating.html#06790c980924b7bed2d8badb5a11b919">RequiresLogin</a> (void) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="24eb96423e142425600b137f49ac2f72"></a><!-- doxytag: member="RakNet::Ranking_UpdateRating::Serialize" ref="24eb96423e142425600b137f49ac2f72" args="(bool writeToBitstream, bool serializeOutput, RakNet::BitStream *bitStream)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRakNet_1_1Ranking__UpdateRating.html#24eb96423e142425600b137f49ac2f72">Serialize</a> (bool writeToBitstream, bool serializeOutput, <a class="el" href="classRakNet_1_1BitStream.html">RakNet::BitStream</a> *bitStream)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Overridable serialization of the contents of this message. Defaults to SerializeBase(). <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRakNet_1_1Ranking__UpdateRating.html#04371c6107b76ee46e01d338d2a970b2">PrevalidateInput</a> (void)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Essentially performs the C function below (CalculateNewEloRating) for two players, updating the new rating for each player. This function will be manually called from C++, as the input parameters are too complex to be determined automatically. Each call to this function should be logged to a separate table. This way if invalid ratings are submitted, the cheating recordings can be pruned. The log should store all parameters to this function, as well as the old and new rating for each player. This operation does not have to be written in C, as long as it performs the same. playerARating and playerBRating are looked up from the database based on playerAHandle and playerBHandle, the titleName, and the gameType. The C code is called twice, once for each player. For example:<p>
John gets 5 points and has a current rating of 100. Jim gets 10 points and has a current rating of 200.<p>
John's new rating = CalculateNewEloRating(100, 200, 5, 10, kFactor); Jim's new rating = CalculateNewEloRating(200, 100, 10, 5, kFactor); 
<p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="bb40a9166eeed59cc59a490440968926"></a><!-- doxytag: member="RakNet::Ranking_UpdateRating::RequiresAdmin" ref="bb40a9166eeed59cc59a490440968926" args="(void) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool RakNet::Ranking_UpdateRating::RequiresAdmin           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Is this message something that should only be run by a system with admin privileges? Set admin privledges with <a class="el" href="classRakNet_1_1Lobby2Server.html#3c941a00314c51a2803f860c336156e8">Lobby2Server::AddAdminAddress()</a> 
<p>
Implements <a class="el" href="structRakNet_1_1Lobby2Message.html#79cbb400e4521af2c353fbd640fed0f7">RakNet::Lobby2Message</a>.
</div>
</div><p>
<a class="anchor" name="5ba36ef4e38f364dea55b3f09d0e7c5f"></a><!-- doxytag: member="RakNet::Ranking_UpdateRating::CancelOnDisconnect" ref="5ba36ef4e38f364dea55b3f09d0e7c5f" args="(void) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool RakNet::Ranking_UpdateRating::CancelOnDisconnect           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Should this message not be processed on the server if the requesting user disconnects before it completes? This should be true for functions that only return data. False for functions that affect other users, or change the database 
<p>
Implements <a class="el" href="structRakNet_1_1Lobby2Message.html#eab0f7b852042f9d664cb7ee0b8b0458">RakNet::Lobby2Message</a>.
</div>
</div><p>
<a class="anchor" name="06790c980924b7bed2d8badb5a11b919"></a><!-- doxytag: member="RakNet::Ranking_UpdateRating::RequiresLogin" ref="06790c980924b7bed2d8badb5a11b919" args="(void) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool RakNet::Ranking_UpdateRating::RequiresLogin           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Does this function require logging into the server before it can be executed? If true, the user id and user handle will be automatically inferred by the last login by looking up the sender's system address. If false, the message should include the username so the database query can lookup which user is performing this operation. 
<p>
Implements <a class="el" href="structRakNet_1_1Lobby2Message.html#575e23419cd160aca576b56ee7476227">RakNet::Lobby2Message</a>.
</div>
</div><p>
<a class="anchor" name="04371c6107b76ee46e01d338d2a970b2"></a><!-- doxytag: member="RakNet::Ranking_UpdateRating::PrevalidateInput" ref="04371c6107b76ee46e01d338d2a970b2" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Ranking_UpdateRating::PrevalidateInput           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If data members can be validated for correctness in the server's main thread, override this function and do those checks here. <dl class="return" compact><dt><b>Returns:</b></dt><dd>True for input OK. False if the input is bad and does not need to be further processed in the database threads. </dd></dl>

<p>
Reimplemented from <a class="el" href="structRakNet_1_1Lobby2Message.html#4d1cc9d0bfb6f82c7976c8fff23f8a28">RakNet::Lobby2Message</a>.
</div>
</div><p>
<hr>The documentation for this struct was generated from the following files:<ul>
<li>C:/RakNet/DependentExtensions/Lobby2/Lobby2Message.h<li>C:/RakNet/DependentExtensions/Lobby2/Lobby2Message.cpp</ul>
<hr size="1"><address style="align: right;"><small>Generated on Sun Sep 7 23:17:21 2008 for RakNet by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1-p1 </small></address>
</body>
</html>
