<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>RakNet: LightweightDatabaseServer Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>LightweightDatabaseServer Class Reference<br>
<small>
[<a class="el" href="group__SIMPLE__DATABSE__GROUP.html">LightweightDatabase</a>]</small>
</h1><!-- doxytag: class="LightweightDatabaseServer" --><!-- doxytag: inherits="PluginInterface2" -->A simple flat database included with <a class="el" href="namespaceRakNet.html" title="Forward declaration.">RakNet</a>, useful for a server browser or a lobby server. A flat database interface. Adds the ability to track IPs of row updaters and passwords for table read and write operations, Best used for data in which queries which do not need to be updated in real-time.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;LightweightDatabaseServer.h&gt;</code>
<p>
<div class="dynheader">
Inheritance diagram for LightweightDatabaseServer:</div>
<div class="dynsection">

<p><center><img src="classLightweightDatabaseServer.png" usemap="#LightweightDatabaseServer_map" border="0" alt=""></center>
<map name="LightweightDatabaseServer_map">
<area href="classPluginInterface2.html" alt="PluginInterface2" shape="rect" coords="0,0,167,24">
</map>
</div>

<p>
<a href="classLightweightDatabaseServer-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e0ece6522eafc979564c3593f46195cc"></a><!-- doxytag: member="LightweightDatabaseServer::LightweightDatabaseServer" ref="e0ece6522eafc979564c3593f46195cc" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLightweightDatabaseServer.html#e0ece6522eafc979564c3593f46195cc">LightweightDatabaseServer</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f9f028552f29e01200721cb9a1190916"></a><!-- doxytag: member="LightweightDatabaseServer::~LightweightDatabaseServer" ref="f9f028552f29e01200721cb9a1190916" args="()" -->
virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLightweightDatabaseServer.html#f9f028552f29e01200721cb9a1190916">~LightweightDatabaseServer</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classDataStructures_1_1Table.html">DataStructures::Table</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLightweightDatabaseServer.html#39030416736c50fc6ff073851784e9b4">GetTable</a> (const char *tableName)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classDataStructures_1_1Table.html">DataStructures::Table</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLightweightDatabaseServer.html#5465e4f6c6c113823603c5ba6db135ee">AddTable</a> (const char *tableName, bool allowRemoteQuery, bool allowRemoteUpdate, bool allowRemoteRemove, const char *queryPassword, const char *updatePassword, const char *removePassword, bool oneRowPerSystemAddress, bool onlyUpdateOwnRows, bool removeRowOnPingFailure, bool removeRowOnDisconnect, bool autogenerateRowIDs)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLightweightDatabaseServer.html#45c3c81c1a1df82d52154e76b8d329fa">RemoveTable</a> (const char *tableName)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d06640779156b864df0570ad8704e3ff"></a><!-- doxytag: member="LightweightDatabaseServer::Clear" ref="d06640779156b864df0570ad8704e3ff" args="(void)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLightweightDatabaseServer.html#d06640779156b864df0570ad8704e3ff">Clear</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clears all memory. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structDataStructures_1_1Page.html">DataStructures::Page</a>&lt; unsigned, <br class="typebreak">
<a class="el" href="structDataStructures_1_1Table_1_1Row.html">DataStructures::Table::Row</a> <br class="typebreak">
*, _TABLE_BPLUS_TREE_ORDER &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLightweightDatabaseServer.html#474bcb1c0f99e5c68659016c2454c724">GetTableRows</a> (const char *tableName)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b942c0aefa51141abc48e8be9abd7cca"></a><!-- doxytag: member="LightweightDatabaseServer::Update" ref="b942c0aefa51141abc48e8be9abd7cca" args="(void)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLightweightDatabaseServer.html#b942c0aefa51141abc48e8be9abd7cca">Update</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update is called every time a packet is checked for . <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual PluginReceiveResult&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLightweightDatabaseServer.html#61c882cd5be37267d20704d916aa9c92">OnReceive</a> (<a class="el" href="structPacket.html">Packet</a> *packet)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLightweightDatabaseServer.html#cdb5f66c2912f8050dd6fde3aa34f338">OnClosedConnection</a> (<a class="el" href="structSystemAddress.html">SystemAddress</a> systemAddress, <a class="el" href="structRakNetGUID.html">RakNetGUID</a> rakNetGUID, PI2_LostConnectionReason lostConnectionReason)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A simple flat database included with <a class="el" href="namespaceRakNet.html" title="Forward declaration.">RakNet</a>, useful for a server browser or a lobby server. A flat database interface. Adds the ability to track IPs of row updaters and passwords for table read and write operations, Best used for data in which queries which do not need to be updated in real-time. <hr><h2>Member Function Documentation</h2>
<a class="anchor" name="5465e4f6c6c113823603c5ba6db135ee"></a><!-- doxytag: member="LightweightDatabaseServer::AddTable" ref="5465e4f6c6c113823603c5ba6db135ee" args="(const char *tableName, bool allowRemoteQuery, bool allowRemoteUpdate, bool allowRemoteRemove, const char *queryPassword, const char *updatePassword, const char *removePassword, bool oneRowPerSystemAddress, bool onlyUpdateOwnRows, bool removeRowOnPingFailure, bool removeRowOnDisconnect, bool autogenerateRowIDs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDataStructures_1_1Table.html">DataStructures::Table</a> * LightweightDatabaseServer::AddTable           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tableName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>allowRemoteQuery</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>allowRemoteUpdate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>allowRemoteRemove</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>queryPassword</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>updatePassword</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>removePassword</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>oneRowPerSystemAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>onlyUpdateOwnRows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>removeRowOnPingFailure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>removeRowOnDisconnect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>autogenerateRowIDs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Adds a new table It is valid to read and write to the returned pointer. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>tableName</em>&nbsp;</td><td>Name of the new table to create. Remote systems will refer to this table by this name. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>allowRemoteQuery</em>&nbsp;</td><td>true to allow remote systems to query the table. false to not allow this. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>allowRemoteUpdate</em>&nbsp;</td><td>true to allow remote systems to update rows in the table. false to not allow this. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>allowRemoteRemove</em>&nbsp;</td><td>true to allow remote systems to remove rows from the table. false to not allow this. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>queryPassword</em>&nbsp;</td><td>The password required to query the table. Pass an empty string for no password. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>updatePassword</em>&nbsp;</td><td>The password required to update rows in the table. Pass an empty string for no password. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>removePassword</em>&nbsp;</td><td>The password required to remove rows from the table. Pass an empty string for no password. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>oneRowPerSystemAddress</em>&nbsp;</td><td>Only used if allowRemoteUpdate==true. This limits remote systems to one row. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>onlyUpdateOwnRows</em>&nbsp;</td><td>Only used if allowRemoteUpdate==true. This limits remote systems to only updating rows they created. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>removeRowOnPingFailure</em>&nbsp;</td><td>Only used if allowRemoteUpdate==true and removeRowOnDisconnect==false. If true, this will periodically ping disconnected systems and remove rows created by that system if that system does not respond to pings. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>removeRowOnDisconnect</em>&nbsp;</td><td>Only used if allowRemoteUpdate==true. This removes rows created by a system when that system disconnects. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>autogenerateRowIDs</em>&nbsp;</td><td>true to automatically generate row IDs. Rows are stored in order by row ID. If false, the clients must specify a unique row ID when adding rows. If they specify a row that already exists the addition is ignored. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The newly created table, or 0 on failure. </dd></dl>

</div>
</div><p>
<a class="anchor" name="39030416736c50fc6ff073851784e9b4"></a><!-- doxytag: member="LightweightDatabaseServer::GetTable" ref="39030416736c50fc6ff073851784e9b4" args="(const char *tableName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDataStructures_1_1Table.html">DataStructures::Table</a> * LightweightDatabaseServer::GetTable           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tableName</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns a table by name. It is valid to read and write to the returned pointer. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>tableName</em>&nbsp;</td><td>The name of the table that was passed to AddTable </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The requested table, or 0 if <em>tableName</em> cannot be found. </dd></dl>

</div>
</div><p>
<a class="anchor" name="474bcb1c0f99e5c68659016c2454c724"></a><!-- doxytag: member="LightweightDatabaseServer::GetTableRows" ref="474bcb1c0f99e5c68659016c2454c724" args="(const char *tableName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structDataStructures_1_1Page.html">DataStructures::Page</a>&lt; unsigned, <a class="el" href="structDataStructures_1_1Table_1_1Row.html">DataStructures::Table::Row</a> *, _TABLE_BPLUS_TREE_ORDER &gt; * LightweightDatabaseServer::GetTableRows           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tableName</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns a linked list of ordered lists containing the rows of a table, by name. The returned structure is internal to the BPlus tree. See DS_BPlusTree This is a convenience accessor, as you can also get this from the table returned from <a class="el" href="classLightweightDatabaseServer.html#39030416736c50fc6ff073851784e9b4">GetTable()</a> <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>tableName</em>&nbsp;</td><td>The name of the table that was passed to AddTable </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The requested rows, or 0 if <em>tableName</em> cannot be found. </dd></dl>

</div>
</div><p>
<a class="anchor" name="cdb5f66c2912f8050dd6fde3aa34f338"></a><!-- doxytag: member="LightweightDatabaseServer::OnClosedConnection" ref="cdb5f66c2912f8050dd6fde3aa34f338" args="(SystemAddress systemAddress, RakNetGUID rakNetGUID, PI2_LostConnectionReason lostConnectionReason)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LightweightDatabaseServer::OnClosedConnection           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSystemAddress.html">SystemAddress</a>&nbsp;</td>
          <td class="paramname"> <em>systemAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRakNetGUID.html">RakNetGUID</a>&nbsp;</td>
          <td class="paramname"> <em>rakNetGUID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PI2_LostConnectionReason&nbsp;</td>
          <td class="paramname"> <em>lostConnectionReason</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called when a connection is dropped because the user called <a class="el" href="classRakPeer.html#05e43a9ba3b85f1000adb2f1e9551000">RakPeer::CloseConnection()</a> for a particular system <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>systemAddress</em>&nbsp;</td><td>The system whose connection was closed </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>rakNetGuid</em>&nbsp;</td><td>The guid of the specified system </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lostConnectionReason</em>&nbsp;</td><td>How the connection was closed: manually, connection lost, or notification of disconnection </td></tr>
  </table>
</dl>

<p>Reimplemented from <a class="el" href="classPluginInterface2.html#f14d27351aca9bfd5b4fc2ac1461ff14">PluginInterface2</a>.</p>

</div>
</div><p>
<a class="anchor" name="61c882cd5be37267d20704d916aa9c92"></a><!-- doxytag: member="LightweightDatabaseServer::OnReceive" ref="61c882cd5be37267d20704d916aa9c92" args="(Packet *packet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PluginReceiveResult LightweightDatabaseServer::OnReceive           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPacket.html">Packet</a> *&nbsp;</td>
          <td class="paramname"> <em>packet</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
OnReceive is called for every packet. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>packet</em>&nbsp;</td><td>the packet that is being returned to the user </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>True to allow the game and other plugins to get this message, false to absorb it </dd></dl>

<p>Reimplemented from <a class="el" href="classPluginInterface2.html#bc50017a35682db5202a7562c58898ea">PluginInterface2</a>.</p>

</div>
</div><p>
<a class="anchor" name="45c3c81c1a1df82d52154e76b8d329fa"></a><!-- doxytag: member="LightweightDatabaseServer::RemoveTable" ref="45c3c81c1a1df82d52154e76b8d329fa" args="(const char *tableName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool LightweightDatabaseServer::RemoveTable           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tableName</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Removes a table by name. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>tableName</em>&nbsp;</td><td>The name of the table that was passed to AddTable </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true on success, false on failure. </dd></dl>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>C:/RakNet/Source/<a class="el" href="LightweightDatabaseServer_8h.html">LightweightDatabaseServer.h</a><li>C:/RakNet/Source/LightweightDatabaseServer.cpp</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Mar 31 19:05:29 2009 for RakNet by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7.1 </small></address>
</body>
</html>
